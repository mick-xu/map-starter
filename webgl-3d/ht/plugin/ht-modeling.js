!function(M,W,n){"use strict";var s="ht",c=M[s],t=null,k=Math,V=k.PI,a=k.cos,b=k.sin,Z=k.abs,r=k.max,I=k.sqrt,Y=1e-5,G=c.Default,i=G.def,T=G.startAnim,m=G.createMatrix,q=G.transformVec,e=G.getInternal(),B=e.addMethod,g=e.superCall,z=e.toPointsArray,l=e.createNormals,J=e.toFloatArray,_=e.glMV,h=e.batchShape,E=e.createNodeMatrix,P=e.getFaceInfo,d=e.transformAppend,L=e.drawFaceInfo,K=e.createAnim,A=e.cube(),F=A.is,v=A.vs,U=A.uv,X=e.ui(),p=c.Node,O=c.Shape,u="h",C="v",S="front",Q="back",D="left",H="right",N="top",R="bottom",x="dw.expanded",y=".expanded",f="dw.angle",j=".angle",w=function(h,Z,c){i(s+"."+h,Z,c)},$=function(E,T,j){j?E.push(T.x,T.y):E.push(T.x,T.y,T.z)},o=[1,0,0],ei=function(E,y,n,A){var F,W,T,f,H=0,g=[];if(A)for(F=A.length;F>H;H+=3)W=A[H],T=A[H+1],f=A[H+2],g.push(new Rl([new _i([y[3*W],y[3*W+1],y[3*W+2]],o,n?[n[2*W],n[2*W+1],0]:t),new _i([y[3*T],y[3*T+1],y[3*T+2]],o,n?[n[2*T],n[2*T+1],0]:t),new _i([y[3*f],y[3*f+1],y[3*f+2]],o,n?[n[2*f],n[2*f+1],0]:t)],E));else for(F=y.length;F>H;H+=3)W=H,T=H+1,f=H+2,g.push(new Rl([new _i([y[3*W],y[3*W+1],y[3*W+2]],o,n?[n[2*W],n[2*W+1],0]:t),new _i([y[3*T],y[3*T+1],y[3*T+2]],o,n?[n[2*T],n[2*T+1],0]:t),new _i([y[3*f],y[3*f+1],y[3*f+2]],o,n?[n[2*f],n[2*f+1],0]:t)],E));return g},ge=[D,S,H,Q,N,R],Ig=ge.concat("csg"),Lg=[0,6,12,18,24,30],$h=function(L,z,G){for(var I=E(L),P=[],N=0;6>N;N++)for(var x=ge[N],W=Lg[N],Z=G?z.getFaceUv(L,x):t,C=G?z.getFaceUvScale(L,x):t,g=G?z.getFaceUvOffset(L,x):t,h=0;2>h;h++){var Y,H,T,K=F[W+3*h],m=F[W+3*h+1],S=F[W+3*h+2];if(G){if(Z){var d=8*N;Y=[Z[2*K-d],Z[2*K+1-d],0],H=[Z[2*m-d],Z[2*m+1-d],0],T=[Z[2*S-d],Z[2*S+1-d],0]}else Y=[U[2*K],U[2*K+1],0],H=[U[2*m],U[2*m+1],0],T=[U[2*S],U[2*S+1],0];C&&(Y[0]*=C[0],Y[1]*=C[1],H[0]*=C[0],H[1]*=C[1],T[0]*=C[0],T[1]*=C[1]),g&&(Y[0]+=g[0],Y[1]+=g[1],H[0]+=g[0],H[1]+=g[1],T[0]+=g[0],T[1]+=g[1])}P.push(new Rl([new _i(q([v[3*K],v[3*K+1],v[3*K+2]],I),o,Y),new _i(q([v[3*m],v[3*m+1],v[3*m+2]],I),o,H),new _i(q([v[3*S],v[3*S+1],v[3*S+2]],I),o,T)],L))}return Po.$15n(P)},Jr=function(S,q){var Y,k=S.data.getAttaches();if(k&&k.each(function(r){r instanceof Wm&&r.s("attach.operation")&&(Y||(Y=[]),Y.push(r))}),Y){var L;ge.forEach(function(a){var C=ei(a,S[a].vs,S[a].tuv);L=L?L.concat(C):C}),L=Po.$15n(L),Y.forEach(function(T){var b=T.s("attach.operation");L[b]&&(L=L[b]($h(T,S.gv,S.csg.tuv)))}),ge.forEach(function(u){u=S[u],u.vs=[],u.tuv&&(u.tuv=[])}),L.$19n().forEach(function(M){var v=M.$10n;if(v instanceof Wm){if(v.s("attach.cull"))return;v="csg"}for(var t=S[v],g=t.vs,H=t.tuv,f=M.$9n,A=2;A<f.length;A++)$(g,f[0].$24n),$(g,f[A-1].$24n),$(g,f[A].$24n),H&&($(H,f[0].uv,!0),$(H,f[A-1].uv,!0),$(H,f[A].uv,!0))})}Ig.forEach(function(N){var q=S[N];q.visible&&q.vs.length?(q.ns=l(q.vs),J(q,"vs"),J(q,"tuv")):delete S[N]}),q&&(h(S,t,q),S.clear())};B(G,{createFrameModel:function(G,n,O,L){G=G==t?.07:G,n=n==t?G:n,O=O==t?G:O,L=L?L:{};var M=L.top,l=L.bottom,Q=L.left,V=L.right,y=L.front,i=L.back,u=[],q=[];return y===!0?(u.push(-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5),q.push(0,0,0,1,1,1,1,1,1,0,0,0)):y===!1||(u.push(-.5,.5,.5,-.5,-.5,.5,-.5+G,-.5,.5,-.5+G,-.5,.5,-.5+G,.5,.5,-.5,.5,.5,.5-G,.5,.5,.5-G,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5-G,.5,.5,-.5+G,.5,.5,-.5+G,.5-n,.5,.5-G,.5-n,.5,.5-G,.5-n,.5,.5-G,.5,.5,-.5+G,.5,.5,-.5+G,-.5+n,.5,-.5+G,-.5,.5,.5-G,-.5,.5,.5-G,-.5,.5,.5-G,-.5+n,.5,-.5+G,-.5+n,.5),q.push(0,0,0,1,G,1,G,1,G,0,0,0,1-G,0,1-G,1,1,1,1,1,1,0,1-G,0,G,0,G,n,1-G,n,1-G,n,1-G,0,G,0,G,1-n,G,1,1-G,1,1-G,1,1-G,1-n,G,1-n)),i===!0?(u.push(-.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5),q.push(1,0,0,1,1,1,0,1,1,0,0,0)):i===!1||(u.push(-.5,.5,-.5,-.5+G,-.5,-.5,-.5,-.5,-.5,-.5+G,-.5,-.5,-.5,.5,-.5,-.5+G,.5,-.5,.5-G,.5,-.5,.5,-.5,-.5,.5-G,-.5,-.5,.5,-.5,-.5,.5-G,.5,-.5,.5,.5,-.5,-.5+G,.5,-.5,.5-G,.5-n,-.5,-.5+G,.5-n,-.5,.5-G,.5-n,-.5,-.5+G,.5,-.5,.5-G,.5,-.5,-.5+G,-.5+n,-.5,.5-G,-.5,-.5,-.5+G,-.5,-.5,.5-G,-.5,-.5,-.5+G,-.5+n,-.5,.5-G,-.5+n,-.5),q.push(1,0,1-G,1,1,1,1-G,1,1,0,1-G,0,G,0,0,1,G,1,0,1,G,0,0,0,1-G,0,G,n,1-G,n,G,n,1-G,0,G,0,1-G,1-n,G,1,1-G,1,G,1,1-G,1-n,G,1-n)),Q===!0?(u.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5),q.push(0,0,0,1,1,1,1,1,1,0,0,0)):Q===!1||(u.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5+O,-.5,-.5,-.5+O,-.5,.5,-.5+O,-.5,.5,-.5,-.5,.5,.5-O,-.5,-.5,.5-O,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5-O,-.5,.5,-.5+O,-.5,.5-n,-.5+O,-.5,.5-n,.5-O,-.5,.5-n,.5-O,-.5,.5,.5-O,-.5,.5,-.5+O,-.5,-.5+n,-.5+O,-.5,-.5,-.5+O,-.5,-.5,.5-O,-.5,-.5,.5-O,-.5,-.5+n,.5-O,-.5,-.5+n,-.5+O),q.push(0,0,0,1,O,1,O,1,O,0,0,0,1-O,0,1-O,1,1,1,1,1,1,0,1-O,0,O,0,O,n,1-O,n,1-O,n,1-O,0,O,0,O,1-n,O,1,1-O,1,1-O,1,1-O,1-n,O,1-n)),V===!0?(u.push(.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5),q.push(1,0,0,1,1,1,0,1,1,0,0,0)):V===!1||(u.push(.5,.5,-.5,.5,-.5,-.5+O,.5,-.5,-.5,.5,-.5,-.5+O,.5,.5,-.5,.5,.5,-.5+O,.5,.5,.5-O,.5,-.5,.5,.5,-.5,.5-O,.5,-.5,.5,.5,.5,.5-O,.5,.5,.5,.5,.5,-.5+O,.5,.5-n,.5-O,.5,.5-n,-.5+O,.5,.5-n,.5-O,.5,.5,-.5+O,.5,.5,.5-O,.5,-.5+n,-.5+O,.5,-.5,.5-O,.5,-.5,-.5+O,.5,-.5,.5-O,.5,-.5+n,-.5+O,.5,-.5+n,.5-O),q.push(1,0,1-O,1,1,1,1-O,1,1,0,1-O,0,O,0,0,1,O,1,0,1,O,0,0,0,1-O,0,O,n,1-O,n,O,n,1-O,0,O,0,1-O,1-n,O,1,1-O,1,O,1,1-O,1-n,O,1-n)),M===!0?(u.push(.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5),q.push(1,1,1,0,0,0,0,0,0,1,1,1)):M===!1||(u.push(.5,.5,.5,.5,.5,-.5,.5-G,.5,-.5,.5-G,.5,-.5,.5-G,.5,.5,.5,.5,.5,-.5+G,.5,.5,-.5+G,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5+G,.5,.5,.5-G,.5,.5,.5-G,.5,.5-O,-.5+G,.5,.5-O,-.5+G,.5,.5-O,-.5+G,.5,.5,.5-G,.5,.5,.5-G,.5,-.5+O,.5-G,.5,-.5,-.5+G,.5,-.5,-.5+G,.5,-.5,-.5+G,.5,-.5+O,.5-G,.5,-.5+O),q.push(1,1,1,0,1-G,0,1-G,0,1-G,1,1,1,G,1,G,0,0,0,0,0,0,1,G,1,1-G,1,1-G,1-O,G,1-O,G,1-O,G,1,1-G,1,1-G,O,1-G,0,G,0,G,0,G,O,1-G,O)),l===!0?(u.push(.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5),q.push(1,0,0,1,1,1,0,1,1,0,0,0)):l===!1||(u.push(.5,-.5,.5,.5-G,-.5,-.5,.5,-.5,-.5,.5-G,-.5,-.5,.5,-.5,.5,.5-G,-.5,.5,-.5+G,-.5,.5,-.5,-.5,-.5,-.5+G,-.5,-.5,-.5,-.5,-.5,-.5+G,-.5,.5,-.5,-.5,.5,.5-G,-.5,.5,-.5+G,-.5,.5-O,.5-G,-.5,.5-O,-.5+G,-.5,.5-O,.5-G,-.5,.5,-.5+G,-.5,.5,.5-G,-.5,-.5+O,-.5+G,-.5,-.5,.5-G,-.5,-.5,-.5+G,-.5,-.5,.5-G,-.5,-.5+O,-.5+G,-.5,-.5+O),q.push(1,0,1-G,1,1,1,1-G,1,1,0,1-G,0,G,0,0,1,G,1,0,1,G,0,0,0,1-G,0,G,O,1-G,O,G,O,1-G,0,G,0,1-G,1-O,G,1,1-G,1,G,1,1-G,1-O,G,1-O)),{vs:u,uv:q}}}),B(c.Style,{"dw.flip":!1,"dw.s3":[.999,.999,.5],"dw.t3":n,"dw.expanded":!1,"dw.toggleable":!0,"dw.axis":"left","dw.start":0,"dw.end":V/2,"dw.angle":0,"attach.cull":!1,"attach.operation":"subtract"},!0),ge.forEach(function(T){var F={};F[T+y]=!1,F[T+".toggleable"]=!1,F[T+".axis"]=D,F[T+".start"]=0,F[T+".end"]=V/2,F[T+j]=0,B(c.Style,F,!0)});var Po=function(){this.$4n=[]};Po.$15n=function(b){var r=new Po;return r.$4n=b,r},Po.prototype={clone:function(){var m=new Po;return m.$4n=this.$4n.map(function(L){return L.clone()}),m},$19n:function(){return this.$4n},union:function(O){var f=new rk(this.clone().$4n),J=new rk(O.clone().$4n);return f.$3n(J),J.$3n(f),J.$6n(),J.$3n(f),J.$6n(),f.$7n(J.$2n()),Po.$15n(f.$2n())},subtract:function(S){var l=new rk(this.clone().$4n),u=new rk(S.clone().$4n);return l.$6n(),l.$3n(u),u.$3n(l),u.$6n(),u.$3n(l),u.$6n(),l.$7n(u.$2n()),l.$6n(),Po.$15n(l.$2n())},intersect:function(O){var e=new rk(this.clone().$4n),p=new rk(O.clone().$4n);return e.$6n(),p.$3n(e),p.$6n(),e.$3n(p),p.$3n(e),e.$7n(p.$2n()),e.$6n(),Po.$15n(e.$2n())},inverse:function(){var E=this.clone();return E.$4n.map(function(e){e.flip()}),E}},Po.cube=function(y){y=y||{};var O=new bj(y.center||[0,0,0]),w=y.radius?y.radius.length?y.radius:[y.radius,y.radius,y.radius]:[1,1,1];return Po.$15n([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(q){return new Rl(q[0].map(function(L){var g=new bj(O.x+w[0]*(2*!!(1&L)-1),O.y+w[1]*(2*!!(2&L)-1),O.z+w[2]*(2*!!(4&L)-1));return new _i(g,new bj(q[1]))}))}))},Po.sphere=function(Y){function c(O,e){O*=2*V,e*=V;var p=new bj(a(O)*b(e),a(e),b(O)*b(e));X.push(new _i($.$20n(p.$21n(J)),p))}Y=Y||{};for(var X,$=new bj(Y.center||[0,0,0]),J=Y.radius||1,m=Y.slices||16,S=Y.stacks||8,E=[],l=0;m>l;l++)for(var p=0;S>p;p++)X=[],c(l/m,p/S),p>0&&c((l+1)/m,p/S),S-1>p&&c((l+1)/m,(p+1)/S),c(l/m,(p+1)/S),E.push(new Rl(X));return Po.$15n(E)},Po.cylinder=function(r){function P(f,q,u){var E=2*q*V,N=e.$21n(a(E)).$20n(F.$21n(b(E))),i=p.$20n(n.$21n(f)).$20n(N.$21n(l)),_=N.$21n(1-Z(u)).$20n(S.$21n(u));return new _i(i,_)}r=r||{};for(var p=new bj(r.start||[0,-1,0]),U=new bj(r.end||[0,1,0]),n=U.$13n(p),l=r.radius||1,$=r.slices||16,S=n.$14n(),z=Z(S.y)>.5,e=new bj(z,!z,0).$12n(S).$14n(),F=e.$12n(S).$14n(),d=new _i(p,S.$11n()),M=new _i(U,S.$14n()),s=[],H=0;$>H;H++){var D=H/$,y=(H+1)/$;s.push(new Rl([d,P(0,D,-1),P(0,y,-1)])),s.push(new Rl([P(0,y,0),P(0,D,0),P(1,D,0),P(1,y,0)])),s.push(new Rl([M,P(1,y,1),P(1,D,1)]))}return Po.$15n(s)};var bj=function(n,z,g){var A=this;3==arguments.length?(A.x=n,A.y=z,A.z=g):"x"in n?(A.x=n.x,A.y=n.y,A.z=n.z):(A.x=n[0],A.y=n[1],A.z=n[2])};bj.prototype={clone:function(){return new bj(this.x,this.y,this.z)},$11n:function(){return new bj(-this.x,-this.y,-this.z)},$20n:function(F){return new bj(this.x+F.x,this.y+F.y,this.z+F.z)},$13n:function(z){return new bj(this.x-z.x,this.y-z.y,this.z-z.z)},$21n:function(V){return new bj(this.x*V,this.y*V,this.z*V)},$16n:function(q){return new bj(this.x/q,this.y/q,this.z/q)},$23n:function(f){return this.x*f.x+this.y*f.y+this.z*f.z},lerp:function(D,F){return this.$20n(D.$13n(this).$21n(F))},length:function(){return I(this.$23n(this))},$14n:function(){return this.$16n(this.length())},$12n:function(O){var Q=this;return new bj(Q.y*O.z-Q.z*O.y,Q.z*O.x-Q.x*O.z,Q.x*O.y-Q.y*O.x)}};var _i=function(V,Q,D){var g=this;g.$24n=new bj(V),g.$22n=new bj(Q),g.uv=D?new bj(D):null};_i.prototype={clone:function(){var x=this;return new _i(x.$24n.clone(),x.$22n.clone(),x.uv?x.uv.clone():null)},flip:function(){this.$22n=this.$22n.$11n()},$18n:function(m,U){var E=this;return new _i(E.$24n.lerp(m.$24n,U),E.$22n.lerp(m.$22n,U),E.uv?E.uv.lerp(m.uv,U):null)}};var _f=function(h,K){this.$22n=h,this.w=K};_f.$17n=function(B,k,Z){var C=k.$13n(B).$12n(Z.$13n(B)).$14n();return new _f(C,C.$23n(B))},_f.prototype={clone:function(){return new _f(this.$22n.clone(),this.w)},flip:function(){var u=this;u.$22n=u.$22n.$11n(),u.w=-u.w},$5n:function(V,c,z,q,J){for(var F=this,g=0,r=1,k=2,h=3,H=0,M=[],v=0;v<V.$9n.length;v++){var n=F.$22n.$23n(V.$9n[v].$24n)-F.w,b=-Y>n?k:n>Y?r:g;H|=b,M.push(b)}switch(H){case g:(F.$22n.$23n(V.$8n.$22n)>0?c:z).push(V);break;case r:q.push(V);break;case k:J.push(V);break;case h:for(var Z=[],t=[],v=0;v<V.$9n.length;v++){var y=(v+1)%V.$9n.length,E=M[v],u=M[y],K=V.$9n[v],I=V.$9n[y];if(E!=k&&Z.push(K),E!=r&&t.push(E!=k?K.clone():K),(E|u)==h){var n=(F.w-this.$22n.$23n(K.$24n))/F.$22n.$23n(I.$24n.$13n(K.$24n)),C=K.$18n(I,n);Z.push(C),t.push(C.clone())}}Z.length>=3&&q.push(new Rl(Z,V.$10n)),t.length>=3&&J.push(new Rl(t,V.$10n))}}};var Rl=function(f,F){var i=this;i.$9n=f,i.$10n=F,i.$8n=_f.$17n(f[0].$24n,f[1].$24n,f[2].$24n)};Rl.prototype={clone:function(){var m=this.$9n.map(function(K){return K.clone()});return new Rl(m,this.$10n)},flip:function(){this.$9n.reverse().map(function(o){o.flip()}),this.$8n.flip()}};var rk=function(O){var V=this;V.$8n=null,V.front=null,V.back=null,V.$4n=[],O&&V.$7n(O)};rk.prototype={clone:function(){var X=this,j=new rk;return j.$8n=X.$8n&&X.$8n.clone(),j.front=X.front&&X.front.clone(),j.back=X.back&&X.back.clone(),j.$4n=X.$4n.map(function(p){return p.clone()}),j},$6n:function(){for(var T=this,K=0;K<T.$4n.length;K++)T.$4n[K].flip();T.$8n.flip(),T.front&&T.front.$6n(),T.back&&T.back.$6n();var H=T.front;T.front=T.back,T.back=H},$1n:function(L){var U=this;if(!U.$8n)return L.slice();for(var N=[],C=[],n=0;n<L.length;n++)U.$8n.$5n(L[n],N,C,N,C);return U.front&&(N=U.front.$1n(N)),C=U.back?U.back.$1n(C):[],N.concat(C)},$3n:function(D){var B=this;B.$4n=D.$1n(B.$4n),B.front&&B.front.$3n(D),B.back&&B.back.$3n(D)},$2n:function(){var z=this,M=z.$4n.slice();return z.front&&(M=M.concat(z.front.$2n())),z.back&&(M=M.concat(z.back.$2n())),M},$7n:function(u){var E=this;if(u.length){E.$8n||(E.$8n=u[0].$8n.clone());for(var Z=[],I=[],Y=0;Y<u.length;Y++)this.$8n.$5n(u[Y],E.$4n,E.$4n,Z,I);Z.length&&(E.front||(E.front=new rk),this.front.$7n(Z)),I.length&&(E.back||(E.back=new rk),E.back.$7n(I))}}};var gc="symbol",Oq=c.Symbol=function(a,m,D){var Z=this;g(Oq,Z),Z.s3(20,20,20),Z.s({"all.visible":!1,shape:"rect"}),Z.setIcon(a,m,D)};w("Symbol",p,{setIcon:function(g,f,R){var M,O=this;return Oq.superClass.setIcon.call(O,g),g?(M={for3d:!0,face:"center",position:44,names:[g]},R&&(M.transaprent=!0),f&&(M.autorotate=f),O.addStyleIcon(gc,M)):O.removeStyleIcon(gc),O.setWidth(e.getImageWidth(G.getImage(g),O)||20),M}});var Wm=c.CSGNode=function(){g(Wm,this),this.s({shape:"rect","attach.thickness":1.001})},Gl={position:1,width:1,height:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,tall:1,elevation:1,"s:attach.cull":1,"s:attach.operation":1};w("CSGNode",p,{_22Q:function(){return Bf},onPropertyChanged:function(Q){var M=this,Y=M.getHost();Wm.superClass.onPropertyChanged.call(M,Q),Gl[Q.property]&&(Y instanceof bh||Y instanceof Wm)&&Y.fp("csgNodeChange",!0,!1)}});var Bf=function(Q,n){g(Bf,this,[Q,n])};i(Bf,X.Node3dUI,{_80o:function(h,H,Y){var Q=this;Q._shape3d?Bf.superClass._80o.call(Q,h,H,Y):(_(Q.gv),Ig.forEach(function(C){L(Q,h,H,C,Y)}))},validate:function(B,c){var K=this,l=K.gv,j=K.data;if(j.s("shape3d"))return Bf.superClass.validate.call(K,B,c),K._shape3d=!0,void 0;K._shape3d=!1;var w=E(j,l.getMat(j)),A=B&&B.uv;K.vf2("csg",A);for(var p=0;6>p;p++)for(var O=ge[p],W=Lg[p],V=K.vf2(O,A,c),f=V.mat||w,q=V.vs,R=V.uv,I=V.tuv,P=0;2>P;P++){var Q=F[W+3*P],$=F[W+3*P+1],z=F[W+3*P+2];if(d(q,f,[v[3*Q],v[3*Q+1],v[3*Q+2]]),d(q,f,[v[3*$],v[3*$+1],v[3*$+2]]),d(q,f,[v[3*z],v[3*z+1],v[3*z+2]]),I)if(R){var h=8*p;I.push(R[2*Q-h],R[2*Q+1-h],R[2*$-h],R[2*$+1-h],R[2*z-h],R[2*z+1-h])}else I.push(U[2*Q],U[2*Q+1],U[2*$],U[2*$+1],U[2*z],U[2*z+1])}Jr(K,B,c)},vf2:function(S,y,l){var Y,g=this,M=g.gv.getFaceVisible(g.data,S);return Y=P(g,S,l),Y.vs=[],Y.tuv=M&&(Y.texture||y)?[]:t,Y.visible=M,Y}});var bh=c.CSGShape=function(){var G=this;g(bh,G),G.s({"shape.background":t,"shape.border.width":8}),G.setTall(240),G.setElevation(120),G.setThickness(14)};w("CSGShape",O,{IRotatable:!1,_22Q:function(){return uk},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setSegments:function(){}});var uk=function(N,p){g(uk,this,[N,p])};i(uk,X.Shape3dUI,{_80o:function(A,H,N){var Q=this;Q.undrawable||(_(Q.gv),Ig.forEach(function(g){L(Q,A,H,g,N)}))},validate:function(l,a){var R=this,H=R.data,G=H.getPoints();if(R.undrawable=G.size()<2)return R.clear(),void 0;var N=H.isClosePath(),n=r(H._thickness/2,Y),y=z(G,t,t,N);Ig.forEach(function(f){R.vf(f,l&&l.uv,!0,a)}),N&&(R.left.visible=!1,R.right.visible=!1),R._12O(y,n),R._20Q(y),Jr(R,l,a)}});var ki=c.DoorWindow=function(){var o=this;g(ki,o),o.setElevation(100),o.s3(100,200,14)};w("DoorWindow",Wm,{IDoorWindow:!0,toggle:function(S){this.setExpanded(!this.s(x),S)},isExpanded:function(){return this.s(x)},setExpanded:function(Y,N){var z=this,y=z.$25n,E=z.getDataModel(),$=z.s(x);if(y&&(y.stop(!0),delete z.$25n),$!==Y){E&&E.beginTransaction();var L=Y?z.s("dw.end"):z.s("dw.start");z.s(x,Y),N=K(N),N?($=z.s(f),N.action=function(v){z.s(f,$+(L-$)*v)},N.finishFunc=function(){E&&E.endTransaction()},z.$25n=T(N)):(z.s(f,L),E&&E.endTransaction())}},getMat:function(){var K=this,w=K.s("dw.s3"),T=K.s("dw.t3"),F=K.s("dw.flip"),v=K.s(f);if(w||v||T||F){var G=[];if(F&&G.push({r3:[0,V,0]}),w&&G.push({s3:w}),v){w=K.getFinalScale3d();var b=K.s("dw.axis"),n=w[0]/2,W=w[1]/2;w[2]/2,b===D?G.push({t3:[n,0,0]},{r3:[0,-v,0]},{t3:[-n,0,0]}):b===H?G.push({t3:[-n,0,0]},{r3:[0,v,0]},{t3:[n,0,0]}):b===N?G.push({t3:[0,-W,0]},{r3:[-v,0,0]},{t3:[0,W,0]}):b===R?G.push({t3:[0,W,0]},{r3:[v,0,0]},{t3:[0,-W,0]}):b===C?G.push({r3:[0,v,0]}):b===u&&G.push({r3:[v,0,0]})}return T&&G.push({t3:T}),m(G)}return t}});var Np=c.CSGBox=function(){var q=this;g(Np,q),q.setElevation(100),q.s3(100,200,100)};w("CSGBox",Wm,{ICSGBox:!0,toggleFace:function(n,U){this.setFaceExpanded(n,!this.s(n+y),U)},isFaceExpanded:function(b){return this.s(b+y)},setFaceExpanded:function(e,n,P){var l=this,p=l.$25n,w=l.s(e+y);if(p&&(p.stop(!0),delete l.$25n),w!==n){var i=n?l.s(e+".end"):l.s(e+".start");l.s(e+y,n),P=K(P),P?(w=l.s(e+j),P.action=function(U){l.s(e+j,w+(i-w)*U)},l.$25n=T(P)):l.s(e+j,i)}},getFaceMat:function(i){var M=this,q=M.s(i+j);if(!q)return t;var _=M.s(i+".axis"),b=M.s3(),d=b[0]/2,B=b[1]/2,V=b[2]/2,O=[];return i===S&&(_===D?O.push({t3:[d,0,-V]},{r3:[0,-q,0]},{t3:[-d,0,V]}):_===H?O.push({t3:[-d,0,-V]},{r3:[0,q,0]},{t3:[d,0,V]}):_===N?O.push({t3:[0,-B,-V]},{r3:[-q,0,0]},{t3:[0,B,V]}):_===R?O.push({t3:[0,B,-V]},{r3:[q,0,0]},{t3:[0,-B,V]}):_===C?O.push({t3:[0,0,-V]},{r3:[0,q,0]},{t3:[0,0,V]}):_===u&&O.push({t3:[0,0,-V]},{r3:[q,0,0]},{t3:[0,0,V]})),i===Q&&(_===D?O.push({t3:[-d,0,V]},{r3:[0,-q,0]},{t3:[d,0,-V]}):_===H?O.push({t3:[d,0,V]},{r3:[0,q,0]},{t3:[-d,0,-V]}):_===N?O.push({t3:[0,-B,V]},{r3:[q,0,0]},{t3:[0,B,-V]}):_===R?O.push({t3:[0,B,V]},{r3:[-q,0,0]},{t3:[0,-B,-V]}):_===C?O.push({t3:[0,0,V]},{r3:[0,q,0]},{t3:[0,0,-V]}):_===u&&O.push({t3:[0,0,V]},{r3:[q,0,0]},{t3:[0,0,-V]})),i===D&&(_===D?O.push({t3:[d,0,V]},{r3:[0,-q,0]},{t3:[-d,0,-V]}):_===H?O.push({t3:[d,0,-V]},{r3:[0,q,0]},{t3:[-d,0,V]}):_===N?O.push({t3:[d,-B,0]},{r3:[0,0,-q]},{t3:[-d,B,0]}):_===R?O.push({t3:[d,B,0]},{r3:[0,0,q]},{t3:[-d,-B,0]}):_===C?O.push({t3:[d,0,0]},{r3:[0,q,0]},{t3:[-d,0,0]}):_===u&&O.push({t3:[d,0,0]},{r3:[0,0,q]},{t3:[-d,0,0]})),i===H&&(_===D?O.push({t3:[-d,0,-V]},{r3:[0,-q,0]},{t3:[d,0,V]}):_===H?O.push({t3:[-d,0,V]},{r3:[0,q,0]},{t3:[d,0,-V]}):_===N?O.push({t3:[-d,-B,0]},{r3:[0,0,q]},{t3:[d,B,0]}):_===R?O.push({t3:[-d,B,0]},{r3:[0,0,-q]},{t3:[d,-B,0]}):_===C?O.push({t3:[-d,0,0]},{r3:[0,q,0]},{t3:[d,0,0]}):_===u&&O.push({t3:[-d,0,0]},{r3:[0,0,q]},{t3:[d,0,0]})),i===N&&(_===D?O.push({t3:[d,-B,0]},{r3:[0,0,q]},{t3:[-d,B,0]}):_===H?O.push({t3:[-d,-B,0]},{r3:[0,0,-q]},{t3:[d,B,0]}):_===N?O.push({t3:[0,-B,V]},{r3:[-q,0,0]},{t3:[0,B,-V]}):_===R?O.push({t3:[0,-B,-V]},{r3:[q,0,0]},{t3:[0,B,V]}):_===C?O.push({t3:[0,-B,0]},{r3:[0,0,q]},{t3:[0,B,0]}):_===u&&O.push({t3:[0,-B,0]},{r3:[q,0,0]},{t3:[0,B,0]})),i===R&&(_===D?O.push({t3:[d,B,0]},{r3:[0,0,-q]},{t3:[-d,-B,0]}):_===H?O.push({t3:[-d,B,0]},{r3:[0,0,q]},{t3:[d,-B,0]}):_===N?O.push({t3:[0,B,-V]},{r3:[-q,0,0]},{t3:[0,-B,V]}):_===R?O.push({t3:[0,B,V]},{r3:[q,0,0]},{t3:[0,-B,-V]}):_===C?O.push({t3:[0,B,0]},{r3:[0,0,q]},{t3:[0,-B,0]}):_===u&&O.push({t3:[0,B,0]},{r3:[q,0,0]},{t3:[0,-B,0]})),m(O)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);