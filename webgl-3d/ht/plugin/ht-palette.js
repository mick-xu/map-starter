!function(y,S,W){"use strict";var x="px",O="0",t="innerHTML",C="className",d=ht.Default,c=ht.Color,N=ht.Node,T="position",$="top",j="left",I=d.animate,J=d.getInternal(),X="width",O="0",z="none",F="max-height",E="font",M="background",n="border-box",p="user-select",R="box-sizing",l="overflow",b=d.isTouchable,J=d.getInternal(),L=c.titleIconBackground,s=d.scrollBarInteractiveSize,v=/msie 9/.test(y.navigator?y.navigator.userAgent.toLowerCase():""),Y=null,A=function(){return document},P=function(g){return A().createElement(g)},m=function(){return P("div")},B=function(){var V=m(),R=V.style;return R.msTouchAction=z,R.cursor="default",b&&R.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",Y),R.position="absolute",R.left=O,R.top=O,V},G=function(){return P("canvas")},f=function(){return document.body},a=function(S,g,f){S.style.setProperty(g,f,Y)},e=function(R,D){R.style.removeProperty(D)},h=function(k,W,i){d.def(ht.widget[k],W,i)},V=function(s,w){s.appendChild(w)},w=function(h,C){h.removeChild(C)},H=J.addEventListener;J.removeEventListener,J.addMethod(d,{paletteExpandIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:L,rotation:3.14}]},paletteCollapseIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:L}]},paletteTitleLabelColor:d.labelSelectColor,paletteTitleLabelFont:d.labelFont,paletteContentLabelFont:d.labelFont,paletteContentLabelColor:"#777",paletteContentBackground:"#fff",paletteTitleHeight:d.widgetTitleHeight,paletteTitleBackground:c.titleBackground,paletteTitleHoverBackground:c.titleBackground,paletteSeparatorWidth:1,paletteSeparatorColor:W,paletteItemHoverBorderColor:c.highlight,paletteItemSelectBackground:c.highlight},!0);var i=".palette-item:hover{border: 1px solid "+d.paletteItemHoverBorderColor+" !important}"+" .palette-header:hover{background: "+d.paletteTitleHoverBackground+" !important}",g=document.createElement("style");b||(g.styleSheet?g.styleSheet.cssText=i:g.appendChild(A().createTextNode(i))),A().getElementsByTagName("head")[0].appendChild(g);var Q=function($){var R=this;R.$22h=$,R.addListeners()};d.def(Q,S,{ms_listener:1,getView:function(){return this.$22h.getView()},$26h:function(){var n=this;n.$36h&&f().removeChild(n.$36h),n.$23h=n.$24h=n.$25h=n.$35h=n.$36h=Y},handle_touchstart:function(n){for(var h,U=this,r=U.$22h,H=n.target,M=r.sm(),X=r.dm(),q="palette-header",Y="palette-header-tool",J="palette-item",x=!1,v=!1,R=!1;H&&(H[C]||"").indexOf(q)<0&&(H[C]||"").indexOf(J)<0;)H=H.parentNode;if(H&&H[C].indexOf(Y)>=0?x=!0:H&&H[C].indexOf(q)>=0?R=!0:H&&H[C].indexOf(J)>=0&&(v=!0),d.isLeftButton(n))if(U.$27h(n))U.$24h=d.getClientPoint(n),U.$25h=r.ty();else if(x){d.preventDefault(n),h=H.parentNode.$11h;var P=X.getDataById(h),k=P.s("tools")[H.toolIndex];k.action&&k.action.call(r)}else if(R){d.preventDefault(n),h=H.$11h;var P=X.getDataById(h);P.isExpanded()?P.setExpanded(!1):P.setExpanded(!0)}else if(v){h=H.$11h;var Q=X.getDataById(h);M.ss(Q),r.handleDragAndDrop&&(d.preventDefault(n),Q.s("draggable")&&(r.handleDragAndDrop(n,"prepare"),U.$35h=0)),Q.s("draggable")||(d.preventDefault(n),U.$24h=d.getClientPoint(n),U.$25h=r.ty())}else d.preventDefault(n),U.$24h=d.getClientPoint(n),U.$25h=r.ty();else U.$26h(n)},handle_mousedown:function(A){this.handle_touchstart(A)},handle_mousewheel:function(B){this.handleScroll(B,B.wheelDelta/40,B.wheelDelta!==B.wheelDeltaX)},handle_DOMMouseScroll:function(t){this.handleScroll(t,-t.detail,1)},handleScroll:function(R,X,h){var K=this.$22h;d.preventDefault(R),h&&K._41o()&&K.ty(K.ty()+20*X)},handle_mouseup:function(Q){this.handle_touchend(Q)},handle_touchend:function(l){var c=this;c.$37h(l),c.$26h(l)},handleWindowMouseUp:function(k){this.handleWindowTouchEnd(k)},handleWindowTouchEnd:function(G){var A=this;A.$37h(G),A.$26h(G)},$37h:function(A){var R=this,_=R.$22h;2===R.$35h&&(R.$35h=3,_.handleDragAndDrop(A,"end"))},handleWindowMouseMove:function(b){this.handleWindowTouchMove(b)},handleWindowTouchMove:function(D){var L=this,T=L.$22h,z=L.$23h,Q=L.$24h,a=L.$25h,E=d.getClientPoint(D),C=T._29I,I=L.$36h;if(1===L.$35h||2===L.$35h){if(L.$35h=2,T.handleDragAndDrop(D,"between"),b){var V=D.touches[0];D=V?V:D.changedTouches[0]}I.style.left=D.pageX-parseInt(I.width)/2+x,I.style.top=D.pageY-parseInt(I.height)/2+x}else"p"===z?T.ty(a+E.y-Q.y):"v"===z&&T.ty(a+(Q.y-E.y)/C.height*T._59I)},handle_mousemove:function(N){this.handle_touchmove(N)},handle_touchmove:function(o){if(!d.isDragging()&&d.isLeftButton(o)){var c=this,p=c.$22h,h=c.$27h(o);if(c.$24h){if(!c.$23h){if(d.getDistance(d.getClientPoint(o),c.$24h)<2)return;c.$23h=h?"v":"p",d.startDragging(c)}}else if(h)p._43o();else if(0===c.$35h){if(c.$35h=1,p.handleDragAndDrop(o,"begin"),b){var w=o.touches[0];o=w?w:o.changedTouches[0]}var G=c.$36h=new Image,n=p.$10h[p.sm().ld().getId()].querySelector(".image-box"),r=parseInt(n.style.width),Z=parseInt(n.style.height);G.draggable=!1,G.src=n.toDataURL(),G.width=r,G.height=Z,G.style.position="absolute",G.style.left=o.pageX-r/2+x,G.style.top=o.pageY-Z/2+x,f().appendChild(G),d.startDragging(c)}}},$27h:function(g){var k=this.$22h,O=k.getView(),j=O.getBoundingClientRect(),W=k._29I,l=g.clientX-j.left+O.scrollLeft;return k._41o()&&W.x+W.width-l<s}}),ht.widget.Palette=function(u){var v=this,e=v._view=J.createView(null,v);v.$9h={},v.$10h={},v.$4h={},v._29I={x:0,y:0,width:0,height:0},v._59I=0,v.dm(u?u:new ht.DataModel),e[C]="ht-widget-palette",v.$29h=new Q(v),a(e,M,d.paletteContentBackground),a(e,l,"auto"),a(e,R,n),a(e,"-moz-"+R,n),a(e,"-webkit-"+p,z),a(e,"-moz-"+p,z),a(e,"-ms-"+p,z),a(e,p,z),a(e,"position","absolute"),a(e,"overflow","hidden"),V(e,v._79O=B()),H(e,"dragstart",function(Q){Q.dataTransfer&&(Q.dataTransfer.setData("Text","nodeid:"+Q.target.$11h),Q.dataTransfer.effectAllowed="all",v.$29h.$26h())})},h("Palette",S,{ms_v:1,ms_fire:1,ms_dm:1,ms_sm:1,ms_vs:1,ms_ac:["itemImageWidth","itemImageHeight","itemImagePadding","itemMargin","layout","autoHideScrollBar","scrollBarSize","scrollBarColor"],$30h:0,_itemImagePadding:4,_itemImageWidth:70,_itemImageHeight:50,_itemMargin:10,_layout:"largeicons",_autoHideScrollBar:d.autoHideScrollBar,_scrollBarSize:d.scrollBarSize,_scrollBarColor:d.scrollBarColor,getViewRect:function(){return this._29I},ty:function(R){return R==Y?this.getTranslateY():(this.setTranslateY(R),void 0)},setTranslateY:function(C){if(this.$32h==Y){var k=this,f=k.$33h(C),y=k.$30h;k.$30h=f,k.fp("translateY",y,f)}},getTranslateY:function(){return this.$30h},setLayout:function(d){var _,o,e=this,q=e._layout;e._layout=d,"smallicons"===d?_=o=20:"iconsonly"===d?_=o=50:(_=70,o=50),e.setItemImageWidth(_),e.setItemImageHeight(o),e.setItemImagePadding(4),e.fp("layout",q,d)},getDataAt:function(n){for(var p=n.target;p&&p.$11h==Y;)p=p.parentNode;return p&&p.$11h!=Y?this.getDataModel().getDataById(p.$11h):void 0},$20h:function(){var v=16;return b&&(v*=1.2),v},$19h:function(){return d.paletteTitleHeight},$18h:function(){var H=d.paletteSeparatorWidth,p=d.paletteTitleBackground,P=d.paletteSeparatorColor||d.brighter(p);return H+x+" solid "+P},$17h:function(g){a(g,"cursor","pointer"),a(g,"display","inline-block"),a(g,"margin-right",(b?8:4)+x),a(g,"vertical-align",$)},$1h:function(s){var Y=this,f=m(),_=m(),u=P("span");f[C]="palette-header",a(f,T,"relative"),a(f,M,d.paletteTitleBackground),a(f,"color",d.paletteTitleLabelColor),a(f,$,O),a(f,R,n),a(f,"-moz-"+R,n),a(f,"padding","0 5px 0 0"),a(f,"border-top",Y.$18h()),a(f,X,"100%"),a(f,"cursor","pointer"),a(f,"white-space","nowrap"),a(f,l,"hidden"),a(f,E,d.paletteTitleLabelFont),a(f,"line-height",Y.$19h()+x),f.$11h=s.getId();var b=G(),y=Y.$19h(),v=Y.$20h();Y.$17h(b),J.setCanvas(b,v,y),V(f,b);var K=s.s("tools");if(K)for(var W=0;W<K.length;W++){var c=G();Y.$17h(c),J.setCanvas(c,v,y),c[C]="palette-header-tool palette-header-tool"+s.getId()+"-"+W,c.style.position="absolute",c.style.right=(v+10)*W+"px",c.toolIndex=W,V(f,c)}return b[C]="palette-toggle-icon-"+s.getId(),_[C]="palette-content",a(_,"max-height",0+x),a(_,E,d.paletteContentLabelFont),a(_,l,"hidden"),_.$11h=s.getId(),Y.$9h[s.getId()]=_,u[t]=s.getName(),a(u,E,d.paletteTitleLabelFont),V(f,b),V(f,u),[f,_]},$2h:function(Y){var h=this,g=h._layout,W=v&&Y.s("draggable")?P("a"):m(),b=G(),X=m(),K=Y.getName()||"",B=Y.s("title")||Y.getToolTip()||K,A=h._itemMargin;b[C]="image-box";var Q=h.getItemImageWidth(),c=h.getItemImageHeight();return J.setCanvas(b,Q,c),V(W,b),X[t]=K,X[C]="label-box","iconsonly"!==g&&V(W,X),W[C]="palette-item",a(W,"vertical-align",$),a(W,"cursor","pointer"),a(W,"border-radius",5+x),a(W,"border","1px solid transparent"),a(W,"text-align","center"),a(W,"display","inline-block"),a(W,"margin-left",A+x),a(W,"margin-top",A+x),a(W,"color",d.paletteContentLabelColor),"smallicons"===g?(a(b,"vertical-align","middle"),a(W,"margin-left",2+x),a(W,"margin-top",2+x),a(W,"padding",2+x),a(W,"text-align",j),a(X,"display","inline-block"),a(X,"min-width",h.$21h+h._itemMargin+x)):"largeicons"===g&&(a(X,"max-width",Q+x),a(X,"overflow","hidden")),W.$11h=Y.getId(),B&&(W.title=B),Y.s("draggable")&&!h.handleDragAndDrop&&(v?(W.href="#",a(W,"text-decoration",z)):W.draggable="true"),W},$16h:function(Y,$,A,R){var i=J.initContext(Y);J.translateAndScale(i,0,0,1),i.clearRect(0,0,A,A);var f=(A-R)/2;d.drawStretchImage(i,d.getImage($),"fill",0,f,R,R),i.restore()},$15h:function(V){var _=this,Y=V.getId(),n=_._view.querySelector(".palette-toggle-icon-"+Y),Z=V.isExpanded()?d.paletteCollapseIcon:d.paletteExpandIcon;if(n&&Z){var N=_.$19h(),s=_.$20h();_.$16h(n,Z,N,s)}},_drawToolsIcon:function(G){var n=this,x=G.s("tools");if(x)for(var d=0;d<x.length;d++){var E=n._view.querySelector(".palette-header-tool"+G.getId()+"-"+d),s=x[d].icon,T=n.$19h(),$=n.$20h();n.$16h(E,s,T,$)}},$14h:function(U){var t=this,c=U.getId(),h=t.$10h[c].querySelector(".image-box"),Z=U.getImage(),R=U.s("image.stretch");if(h&&Z){var r=J.initContext(h),g=t.getItemImagePadding();g="smallicons"===t._layout?g/2:g;var Q=t.getItemImageWidth()-2*g,K=t.getItemImageHeight()-2*g;J.translateAndScale(r,0,0,1),r.clearRect(0,0,Q,K),d.drawStretchImage(r,d.getImage(Z),R,g,g,Q,K,U,t),r.restore()}},validateImpl:function(){var e,L,D,b=this,M=b.$9h,E=b._layout,z=b.$10h,S=b.$4h,q=b._view,s=b.dm();if(b.$13h&&(delete b.$13h,S={},s.each(function(f){S[f.getId()]=f})),"smallicons"===E)for(var y in S){var $=S[y];if($ instanceof N){var C=$.getName()||"",v=d.getTextSize(d.paletteContentLabelFont,C).width;b.$21h!=Y&&b.$21h>v||(b.$21h=v)}}for(var y in S){D=S[y];var G,i;if(s.contains(D)){if(D instanceof ht.Group){var p,J=b.$1h(D),f=z[D.getId()];f&&(p=f.nextSibling,w(q,p),w(q,f)),L=s.getSiblings(D).indexOf(D);var o=q.children[2*L]||b._79O;o&&o.parentNode?(q.insertBefore(J[0],o),q.insertBefore(p||J[1],o)):(q.appendChild(J[0]),q.appendChild(p||J[1])),z[D.getId()]=J[0],e=M[D.getId()]=p||J[1],i=D.$12h;var T=D.s("promptText");i||(D.$12h=P("div"),D.$12h[t]=T||"",i=D.$12h),0===D.getChildren().size()?e.contains(i)||V(e,i):e.contains(i)&&w(e,i)}else if(G=D.getParent()){var g=b.$2h(D),Z=z[D.getId()];e=M[G.getId()],Z&&w(Z.parentNode,Z),L=s.getSiblings(D).indexOf(D);var Q=e.children[L];Q?e.insertBefore(g,Q):V(e,g),z[D.getId()]=g,b.$14h(D)}}else{var _=z[D.getId()],X=_.parentNode;if(D instanceof ht.Group){var k=_.nextSibling;w(q,_),w(q,k),delete M[D.getId()]}else w(X,_),0===X.children.length&&(G=s.getDataById(X.$11h),G&&(i=G.$12h,i&&!X.contains(i)&&V(X,i)));delete z[D.getId()]}}b.$4h={};var r=function(){var y=b._59I,h=0;b.$32h!=Y&&(clearInterval(b.$32h),h=0,delete b.$32h),b.$32h=setInterval(function(){b.$31h(),y===b._59I?(h++,h>=2&&(clearInterval(b.$32h),delete b.$32h)):(h=0,y=b._59I)},30)};for(var U in M)if(e=M[U],D=s.getDataById(M[U].$11h),b.$15h(D),b._drawToolsIcon(D),D.isExpanded()){if(e.style.maxHeight===0+x){var u=e.scrollHeight+b._itemMargin+x;I(e).duration(200).set(F,u).set("padding-bottom",b._itemMargin+x).end(function(){return function(){r()}}(u))}else e.style.maxHeight=e.scrollHeight+x;e.style.paddingBottom=b._itemMargin+x}else e.style.maxHeight!==0+x&&I(e).duration(200).set(F,O).set("padding-bottom",O).end(function(){return function(){r()}}(e));b.$28h(),b.$31h()},$31h:function(){for(var k=this,J=k._view,t=0,U=J.children,l=0;l<U.length;l++){var Z=U[l];Z.className&&Z.className.indexOf("palette-")>=0&&(t+=Z.offsetHeight)}k._59I=t,k.$30h=k.$33h(k.ty());var V=k.ty();J.scrollTop=-V,k._29I={x:0,y:-V,width:J.clientWidth,height:J.clientHeight},a(k._79O,$,-V+x),k._93I()},$33h:function(O){var F=this,B=F._29I.height-F._59I;return B>O&&(O=B),O>0?0:Math.round(O)},redraw:function(){this.$13h||(this.$13h=1,this.iv())},onPropertyChanged:function(U){["autoHideScrollBar","scrollBarSize","scrollBarColor","translateY"].indexOf(U.property)<0&&this.redraw(),"translateY"===U.property&&(this.iv(),this._43o())},findDataByName:function(K){for(var Q=this.dm().getDatas(),L=0;L<Q.size();L++){var C=Q.get(L);if(C.getName()===K)return C}},setDataModel:function(r){var M=this,E=M._dataModel,c=M._selectionModel;E!==r&&(E&&(E.umm(M.$6h,M),E.umd(M.$8h,M),E.umh(M.$7h,M),c||E.sm().ums(M.$28h,M)),M._dataModel=r,r.mm(M.$6h,M),r.md(M.$8h,M),r.mh(M.$7h,M),c?c._21I(r):r.sm().ms(M.$28h,M),M.sm().setSelectionMode("single"),M.fp("dataModel",E,r))},$6h:function(u){var n=this,h=n._view,C=u.data,P=n.$4h;"add"===u.kind?P[C.getId()]=C:"remove"===u.kind?P[C.getId()]=C:"clear"===u.kind&&(n.$10h={},n.$9h={},n.$4h={},h[t]=""),n.iv()},$7h:function(v){var n=this,t=v.data;n.$4h[t.getId()]=t,n.iv()},$8h:function(n){var u=this,p=n.data,G=n.property;"expanded"===G?u.iv():(u.$4h[p.getId()]=p,u.iv())},$28h:function(){var m,b=this,P=b.sm(),$="palette-item",S=P.ld();this.dm().each(function(r){m=b.$10h[r.getId()],m&&m[C].indexOf($)>=0&&(r===S?a(m,M,d.paletteItemSelectBackground):e(m,M))})}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);