!function(W,E){"use strict";var $="ht",f=W[$],X="innerHTML",L="className",m=null,n="px",b=f.Default,x=b.getInternal(),o="0",O=function(){return document},s=function(W){return O().createElement(W)},d=function(){return s("canvas")},R=function(S,j,Z){S.style.setProperty(j,Z,m)},F=function(C,M,h){b.def(f.widget[C],M,h)},U=function(q,n){q.appendChild(n)},A=function(R,$){R.removeChild($)},y=x.addEventListener,I=x.removeEventListener,l=b.isTouchable;x.addMethod(b,{menuLabelFont:(l?"16":"13")+"px arial, sans-serif",menuLabelColor:"#000",menuBackground:"#F0EFEE",menuHoverBackground:"#648BFE",menuHoverLabelColor:"#fff",menuSeparatorWidth:1,menuSeparatorColor:"#999"},!0),f.widget.Menu=function(F){var d=this,N=d._view=x.createView(null,d),X=d.$1g=new f.widget.ContextMenu,Z=s("ul");X._r=!0,X._view[L]+=" ht-widget-dropdownmenu",N[L]="ht-widget-menu",Z[L]="header",R(N,"margin",o),R(N,"padding",o),R(N,"background",b.menuBackground),R(N,"-webkit-user-select","none"),R(N,"-moz-user-select","none"),R(N,"user-select","none"),R(N,"text-align","left"),R(N,"border-bottom",b.menuSeparatorWidth+"px solid "+b.menuSeparatorColor),R(N,"cursor","default"),R(N,"overflow","auto"),R(N,"white-space","nowrap"),R(N,"font",b.menuLabelFont),R(N,"color",b.menuLabelColor),R(N,"box-sizing","border-box"),R(N,"-moz-box-sizing","border-box"),R(Z,"list-style","none"),R(Z,"margin",o),R(Z,"padding",o),R(Z,"display","inline-block"),U(N,Z),d.setItems(F),d.$2g=function(w){d.$3g(w)},d.$4g=function(Z){d.$5g(Z)},d.$6g=function(F){d.$7g(F)},d.$8g=function(i){d.$9g(i)},d.$9b=function(A){d.$10g(A)},d._autoShow=!0,d.setAutoShow(!1),X.afterHide=function(){d.$11g()},X.afterShow=function(){d.$12g()},I(O(),"keydown",X.$3b),d.$3b=function(E){d.$13g(E)},d.invalidate()},F("Menu",E,{_items:m,$14g:b.menuHoverBackground,$15g:b.menuHoverLabelColor,$16g:{},_enableGlobalKey:!1,ms_v:1,$21g:"smallicons",$22g:0,$23g:0,$24g:"left",getDropDownMenu:function(){return this.$1g},setLayout:function(G){var y=this;if(y.$21g=G,y.setItems(y._items),"largeicons"===G){for(var H=y._view.querySelectorAll(".header-item"),b=0,E=0;E<H.length;E++){var a=H[E];b=Math.max(b,a.clientWidth)}for(var E=0;E<H.length;E++){var a=H[E];R(a,"min-width",b+n)}}this.invalidate()},getLayout:function(){return this.$21g},setHeaderItemHGap:function(z){this.$22g=z;for(var o=this._view.querySelectorAll(".header-item"),Z=0;Z<o.length;Z++){var t=o[Z];R(t,"margin-left",z+n),R(t,"margin-right",z+n)}},getHeaderItemHGap:function(){return this.$22g},setHeaderItemVGap:function(t){this.$23g=t;for(var z=this._view.querySelectorAll(".header-item"),J=0;J<z.length;J++){var S=z[J];R(S,"margin-top",t+n),R(S,"margin-bottom",t+n)}},getHeaderItemVGap:function(){return this.$24g},setHeaderItemAlign:function(b){this.$24g=b,R(this._view,"text-align",b)},getHeaderItemAlign:function(){return this.$23g},enableGlobalKey:function(){var F=this,b=F._enableGlobalKey;b===!1&&(y(O(),"keydown",F.$3b),F._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,I(O(),"keydown",this.$3b)},setHoverBackground:function(i){this.$14g=i},setHoverColor:function(K){this.$15g=K},setItems:function(k){var N=this,C=N._view,A=N.$21g;if(N._items=k,C.children[0][X]="",N.$16g={},k&&k.length){for(var W=C.children[0],e=0,t=O().createDocumentFragment();e<k.length;e++){var v=k[e],b=s("li"),M=s("span");if(v.icon){var F=d();F[L]="menu-item-icon","smallicons"===A?(R(F,"height","1.2em"),R(F,"width","1.2em"),R(F,"vertical-align","middle")):(R(F,"height","32px"),R(F,"width","32px"),R(F,"display","block"),R(F,"margin","0 auto")),F.$20g=v.icon,U(b,F)}b[L]="header-item",R(b,"display","inline-block"),R(b,"vertical-align","top"),R(b,"padding","0 1.2em"),R(b,"line-height","1.8em"),"largeicons"===A&&R(b,"text-align","center"),R(b,"background-color","rgba(0,0,0,0)"),b.setAttribute("data-index",e),N.$16g[e]=v.items,M[X]=v.label,"iconsonly"!==A&&U(b,M),U(t,b)}U(W,t)}},showDropdownMenu:function(w){var M=this,I=M.$16g[w],d=M.$1g,G=M._view.children[0].children[w],v=M.$17g;if(G&&G!==v){v&&M.hideDropdownMenu();var p=G.getBoundingClientRect(),_=b.getWindowInfo();M.$17g=G,d.setItems(I),d.show(p.left+_.left,p.top+p.height+_.top,!1)}},hideDropdownMenu:function(){this.$1g.hide()},getItemByProperty:function($,o){var L=this,M=L._items;return M&&0!==M.length?L.$1g.getItemByProperty($,o,M):m},$12g:function(){var g=this,F=g.$17g;F.style.background=g.$14g,F.style.color=g.$15g,g._autoShow||y(O(),l?"touchstart":"mousedown",g.$9b)},$11g:function(){var S=this,T=S.$17g;T&&(T.style.background="",T.style.color="",S.$17g=m),I(O(),l?"touchstart":"mousedown",S.$9b)},$10g:function(f){var d=this,y=d._view,A=d.$1g,Q=y.children[0];!O().body.contains(y)||Q.contains(f.target)||A._view.contains(f.target)||d.hideDropdownMenu()},$13g:function(u){var B=this,T=B.$1g;O().body.contains(B._view)&&T.$13b.$4b.call(T.$13b,u,B._items)},setAutoShow:function(r){var F=this,T=F.$1g,f=F._view;F._autoShow!==r&&(F._autoShow?(I(f,"mouseover",F.$2g),I(f,"mouseout",F.$4g),I(T._view,"mouseout",F.$4g),l||(y(f,"mouseover",F.$8g),y(f,"mouseout",F.$8g)),y(f,l?"touchstart":"mousedown",F.$6g)):(I(f,"mouseover",F.$8g),I(f,"mouseout",F.$8g),I(f,l?"touchstart":"mousedown",F.$6g),I(O(),l?"touchstart":"mousedown",F.$9b),l||(y(f,"mouseover",F.$2g),y(f,"mouseout",F.$4g),y(T._view,"mouseout",F.$4g))),F._autoShow=r)},$3g:function(b){var V=this,N=V._view.children[0],d=b.target;if(N!==d&&N.contains(d)){for(;"header-item"!==d[L];)d=d.parentNode;V.showDropdownMenu(d.getAttribute("data-index"))}},$5g:function(h){var L=this,b=L._view.children[0],Y=L.$1g,B=h.target,a=h.relatedTarget;!b.contains(B)&&!Y._view.contains(B)||b.contains(a)||Y._view.contains(a)||L.hideDropdownMenu()},$7g:function(z){z.preventDefault();var k=this,E=k._view.children[0],V=k.$1g,J=z.target;if(b.isLeftButton(z)&&E!==J&&E.contains(J))if(l){for(;"header-item"!==J[L];)J=J.parentNode;var d=J.getAttribute("data-index"),V=k.$1g,y=k._view.children[0].children[d],M=k.$17g;V.isShowing()&&k.hideDropdownMenu(),y!==M&&k.showDropdownMenu(d)}else if(V.isShowing())k.hideDropdownMenu();else{for(;"header-item"!==J[L];)J=J.parentNode;k.showDropdownMenu(J.getAttribute("data-index"))}},$9g:function(F){var $=this,S=$._view,K=$.$1g,l=F.target;if(S.contains(l)){for(var Z=S.querySelectorAll(".header-item"),o=m,V=0;V<Z.length;V++){var n=Z[V];n.style.background="",n.style.color="","mouseover"===F.type?n.contains(l)&&(o=n):"mouseout"===F.type&&K.isShowing()&&$.$17g===n&&(o=n)}K.isShowing()&&(o||(o=$.$17g),$.showDropdownMenu(o.getAttribute("data-index"))),o&&(o.style.background=$.$14g,o.style.color=$.$15g)}},getShowingMenuIndex:function(){var F=this.$17g;return F?F.getAttribute("data-index"):-1},addTo:function(H){var D=this,R=D._view;U(H,R),D.invalidate()},dispose:function(){var F=this,P=F._view,f=F.$1g;P&&(F._autoShow?(I(P,"mouseover",F.$2g),I(P,"mouseout",F.$4g),I(f._view,"mouseout",F.$4g)):(I(P,"mouseover",F.$8g),I(P,"mouseout",F.$8g),I(P,l?"touchstart":"mousedown",F.$6g),I(O(),l?"touchstart":"mousedown",F.$9b)),I(O(),"keydown",F.$3b),f.dispose(),P.parentNode&&A(P.parentNode,P),F._view=F.$1g=F.$16g=F._items=F.$17g=F.$2g=F.$4g=F.$6g=F.$8g=F.$9b=F.$3b=m)},$19g:function(j,r,W,i){var I=x.initContext(j);x.translateAndScale(I,0,0,1),I.clearRect(0,0,W,i),b.drawStretchImage(I,b.getImage(r),"fill",0,0,W,i),I.restore()},validateImpl:function(){var N,I,S,W=this,j=W._view,D=j.querySelectorAll(".menu-item-icon");for(S=0;S<D.length;S++){var d=D[S];N=d.clientWidth,I=d.clientHeight,N&&I&&(x.setCanvas(d,N,I),W.$19g(d,b.getImage(d.$20g),N,I))}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);